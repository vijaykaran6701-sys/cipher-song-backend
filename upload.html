<!DOCTYPE html>
<html>
<head>
  <title>Upload Song</title>
</head>
<body>
  <h2>Upload Song</h2>

  <input id="title" placeholder="Song title"><br><br>
  <input id="artist" placeholder="Artist ID"><br><br>
  <input type="file" id="audio"><br><br>
  <input type="file" id="cover"><br><br>
  <input id="token" placeholder="JWT Token"><br><br>

  <button onclick="uploadSong()">Upload</button>

  <script>
    function uploadSong() {
      const fd = new FormData();
      fd.append("title", document.getElementById("title").value);
      fd.append("artist", document.getElementById("artist").value);
      fd.append("audio", document.getElementById("audio").files[0]);
      fd.append("cover", document.getElementById("cover").files[0]);

      fetch("/api/songs", {
        method: "POST",
        headers: {
          Authorization: "Bearer " + document.getElementById("token").value.trim()
        },
        body: fd
      })
      .then(r => r.json())
      .then(d => {
        console.log(d);
        alert("✅ Uploaded Successfully");
      })
      .catch(err => {
        console.error(err);
        alert("❌ Upload Failed");
      });
    }
  </script>
</body>
</html>
